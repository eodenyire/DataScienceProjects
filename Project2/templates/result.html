{% extends "base.html" %}

{% block title %}Prediction Result - Dog Breed Prediction{% endblock %}

{% block extra_css %}
<style>
    .result-section {
        max-width: 900px;
        margin: 0 auto;
    }

    .result-header {
        text-align: center;
        margin-bottom: 40px;
    }

    .result-header h2 {
        color: #333;
        font-size: 2em;
        margin-bottom: 10px;
    }

    .result-grid {
        display: grid;
        grid-template-columns: 1fr 1fr;
        gap: 30px;
        margin-bottom: 40px;
    }

    .image-container {
        text-align: center;
    }

    .image-container img {
        max-width: 100%;
        height: auto;
        border-radius: 12px;
        box-shadow: 0 5px 20px rgba(0, 0, 0, 0.1);
    }

    .image-container h3 {
        color: #667eea;
        margin-top: 15px;
        font-size: 1.2em;
    }

    .prediction-card {
        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        color: white;
        padding: 30px;
        border-radius: 12px;
        text-align: center;
        margin-bottom: 30px;
    }

    .prediction-card h3 {
        font-size: 1.5em;
        margin-bottom: 15px;
        opacity: 0.9;
    }

    .breed-name {
        font-size: 2.5em;
        font-weight: bold;
        margin-bottom: 20px;
    }

    .confidence-bar {
        background: rgba(255, 255, 255, 0.3);
        border-radius: 50px;
        height: 30px;
        overflow: hidden;
        margin-bottom: 10px;
    }

    .confidence-fill {
        background: white;
        height: 100%;
        border-radius: 50px;
        display: flex;
        align-items: center;
        justify-content: center;
        font-weight: bold;
        transition: width 1s ease-out;
    }

    .top-predictions {
        background: #f8f9fa;
        padding: 30px;
        border-radius: 12px;
        margin-bottom: 30px;
    }

    .top-predictions h3 {
        color: #333;
        margin-bottom: 20px;
        font-size: 1.5em;
    }

    .prediction-item {
        display: flex;
        align-items: center;
        margin-bottom: 15px;
        padding: 15px;
        background: white;
        border-radius: 8px;
        box-shadow: 0 2px 5px rgba(0, 0, 0, 0.05);
    }

    .prediction-rank {
        font-size: 1.5em;
        font-weight: bold;
        color: #667eea;
        margin-right: 15px;
        min-width: 30px;
    }

    .prediction-info {
        flex-grow: 1;
    }

    .prediction-breed {
        font-weight: 600;
        color: #333;
        margin-bottom: 5px;
    }

    .prediction-confidence {
        color: #666;
        font-size: 0.9em;
    }

    .mini-bar {
        width: 100%;
        height: 6px;
        background: #e9ecef;
        border-radius: 3px;
        overflow: hidden;
        margin-top: 5px;
    }

    .mini-bar-fill {
        height: 100%;
        background: linear-gradient(90deg, #667eea, #764ba2);
        border-radius: 3px;
        transition: width 1s ease-out;
    }

    .actions {
        text-align: center;
        margin-top: 30px;
    }

    .btn-secondary {
        background: #6c757d;
        margin-left: 10px;
    }

    .btn-secondary:hover {
        background: #5a6268;
    }

    @media (max-width: 768px) {
        .result-grid {
            grid-template-columns: 1fr;
        }
    }
</style>
{% endblock %}

{% block content %}
<div class="result-section">
    <div class="result-header">
        <h2>üéØ Prediction Results</h2>
    </div>

    <div class="prediction-card">
        <h3>Predicted Breed:</h3>
        <div class="breed-name">{{ result.predicted_breed }}</div>
        <div class="confidence-bar">
            <div class="confidence-fill" style="width: {{ result.confidence }}%;">
                {{ result.confidence }}% Confident
            </div>
        </div>
    </div>

    <div class="result-grid">
        <div class="image-container">
            <img src="{{ url_for('static', filename='uploads/' + result.filename) }}" alt="Uploaded Dog">
            <h3>Your Uploaded Image</h3>
        </div>
        <div class="image-container">
            <div style="display: flex; align-items: center; justify-content: center; height: 300px; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); border-radius: 12px;">
                <div style="text-align: center; color: white;">
                    <div style="font-size: 5em; margin-bottom: 10px;">üêï</div>
                    <div style="font-size: 2em; font-weight: bold;">{{ result.predicted_breed }}</div>
                </div>
            </div>
            <h3>Predicted Breed</h3>
        </div>
    </div>

    <div class="top-predictions">
        <h3>üèÜ Top 3 Predictions</h3>
        {% for prediction in result.top_predictions %}
        <div class="prediction-item">
            <div class="prediction-rank">#{{ loop.index }}</div>
            <div class="prediction-info">
                <div class="prediction-breed">{{ prediction.breed }}</div>
                <div class="prediction-confidence">{{ prediction.confidence }}% confidence</div>
                <div class="mini-bar">
                    <div class="mini-bar-fill" style="width: {{ prediction.confidence }}%;"></div>
                </div>
            </div>
        </div>
        {% endfor %}
    </div>

    <div class="actions">
        <a href="{{ url_for('index') }}" class="btn">üîÑ Try Another Image</a>
        <a href="{{ url_for('about') }}" class="btn btn-secondary">‚ÑπÔ∏è Learn More</a>
    </div>
</div>

<script>
    // Animate confidence bars on load
    window.addEventListener('load', function() {
        const fills = document.querySelectorAll('.confidence-fill, .mini-bar-fill');
        fills.forEach(fill => {
            const width = fill.style.width;
            fill.style.width = '0%';
            setTimeout(() => {
                fill.style.width = width;
            }, 100);
        });
    });
</script>
{% endblock %}
